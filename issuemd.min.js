(function(global,factory){typeof exports==="object"&&typeof module!=="undefined"?module.exports=factory():typeof define==="function"&&define.amd?define(factory):global.issuemd=factory()})(this,function(){"use strict";function getLastArgument(args,targetType,defaultValue){var last=args[args.length-1];return type(last)===targetType?last:defaultValue||null}function defined(item){return typeof item!=="undefined"&&item!==null}function times(qty,fn){var i,result;for(i=0;i<qty;i++){result=fn(i,result)}return result}function copy(input){return JSON.parse(JSON.stringify(input))}function type(me){return Object.prototype.toString.call(me).split(/\W/)[2].toLowerCase()}function each(obj,iteratee,context){if(obj===null||obj===undefined){return obj}if(context!==void 0){iteratee=function(value,other){return iteratee.call(context,value,other)}}var i;var length=obj.length;if(length===+length){for(i=0;i<length;i++){if(iteratee(obj[i],i,obj)===false){break}}}else{var keys=objectKeys(obj);for(i=0,length=keys.length;i<length;i++){if(iteratee(obj[keys[i]],keys[i],obj)===false){break}}}return obj}function objectKeys(obj){var keys=[];for(var i in obj){if(obj.hasOwnProperty(i)){keys.push(i)}}return keys}function trim(string){return(string+"").replace(/(^\s+|\s+$)/g,"")}function extend(original){var args=[].slice.call(arguments,1);for(var i in args){var addition=args[i];for(var prop in addition){if(Object.prototype.hasOwnProperty.call(addition,prop)){original[prop]=addition[prop]}}}return original}function wordwrap(str,intWidth){var result=[];each(str.split(/\r\n|\n|\r/),function(line){var endPosition;var segment;var out="";while(line.length>intWidth){segment=line.slice(0,intWidth+1).match(/\S*(\s)?$/);if(segment[1]){endPosition=intWidth}else if(segment.input.length-segment[0].length){endPosition=segment.input.length-segment[0].length}else{endPosition=intWidth}out+=line.slice(0,endPosition);line=line.slice(endPosition);line=line.replace(/^\s+/,"");if(!!line&&line.length){out+="\n"}}result.push(out+line)});return result.join("\n")}function map(a,b,c){var d,e,f;if(a==null){throw new TypeError("map called on null or undefined")}var g=Object(a),h=g.length>>>0;if(typeof b!=="function"){throw new TypeError(b+" is not a function")}for(arguments.length>1&&(d=c),e=new Array(h),f=0;h>f;){var i,j;f in g&&(i=g[f],j=b.call(d,i,f,g),e[f]=j),f++}return e}function reduce(a,b){if(a==null){throw new TypeError("reduce called on null or undefined")}if(typeof b!=="function"){throw new TypeError(b+" is not a function")}var f,c=Object(a),d=c.length>>>0,e=0;if(arguments.length==3){f=arguments[2]}else{for(;d>e&&!(e in c);){e++}if(e>=d){throw new TypeError("Reduce of empty array with no initial value")}f=c[e++]}for(;d>e;e++){e in c&&(f=b(f,c[e],e,c))}return f}var utils=Object.freeze({getLastArgument:getLastArgument,defined:defined,times:times,copy:copy,type:type,each:each,objectKeys:objectKeys,trim:trim,extend:extend,wordwrap:wordwrap,map:map,reduce:reduce});var mymodule=function(){var exports={},module={exports:exports};(function($){"use strict";function safeAdd(x,y){var lsw=(x&65535)+(y&65535);var msw=(x>>16)+(y>>16)+(lsw>>16);return msw<<16|lsw&65535}function bitRotateLeft(num,cnt){return num<<cnt|num>>>32-cnt}function md5cmn(q,a,b,x,s,t){return safeAdd(bitRotateLeft(safeAdd(safeAdd(a,q),safeAdd(x,t)),s),b)}function md5ff(a,b,c,d,x,s,t){return md5cmn(b&c|~b&d,a,b,x,s,t)}function md5gg(a,b,c,d,x,s,t){return md5cmn(b&d|c&~d,a,b,x,s,t)}function md5hh(a,b,c,d,x,s,t){return md5cmn(b^c^d,a,b,x,s,t)}function md5ii(a,b,c,d,x,s,t){return md5cmn(c^(b|~d),a,b,x,s,t)}function binlMD5(x,len){x[len>>5]|=128<<len%32;x[(len+64>>>9<<4)+14]=len;var i;var olda;var oldb;var oldc;var oldd;var a=1732584193;var b=-271733879;var c=-1732584194;var d=271733878;for(i=0;i<x.length;i+=16){olda=a;oldb=b;oldc=c;oldd=d;a=md5ff(a,b,c,d,x[i],7,-680876936);d=md5ff(d,a,b,c,x[i+1],12,-389564586);c=md5ff(c,d,a,b,x[i+2],17,606105819);b=md5ff(b,c,d,a,x[i+3],22,-1044525330);a=md5ff(a,b,c,d,x[i+4],7,-176418897);d=md5ff(d,a,b,c,x[i+5],12,1200080426);c=md5ff(c,d,a,b,x[i+6],17,-1473231341);b=md5ff(b,c,d,a,x[i+7],22,-45705983);a=md5ff(a,b,c,d,x[i+8],7,1770035416);d=md5ff(d,a,b,c,x[i+9],12,-1958414417);c=md5ff(c,d,a,b,x[i+10],17,-42063);b=md5ff(b,c,d,a,x[i+11],22,-1990404162);a=md5ff(a,b,c,d,x[i+12],7,1804603682);d=md5ff(d,a,b,c,x[i+13],12,-40341101);c=md5ff(c,d,a,b,x[i+14],17,-1502002290);b=md5ff(b,c,d,a,x[i+15],22,1236535329);a=md5gg(a,b,c,d,x[i+1],5,-165796510);d=md5gg(d,a,b,c,x[i+6],9,-1069501632);c=md5gg(c,d,a,b,x[i+11],14,643717713);b=md5gg(b,c,d,a,x[i],20,-373897302);a=md5gg(a,b,c,d,x[i+5],5,-701558691);d=md5gg(d,a,b,c,x[i+10],9,38016083);c=md5gg(c,d,a,b,x[i+15],14,-660478335);b=md5gg(b,c,d,a,x[i+4],20,-405537848);a=md5gg(a,b,c,d,x[i+9],5,568446438);d=md5gg(d,a,b,c,x[i+14],9,-1019803690);c=md5gg(c,d,a,b,x[i+3],14,-187363961);b=md5gg(b,c,d,a,x[i+8],20,1163531501);a=md5gg(a,b,c,d,x[i+13],5,-1444681467);d=md5gg(d,a,b,c,x[i+2],9,-51403784);c=md5gg(c,d,a,b,x[i+7],14,1735328473);b=md5gg(b,c,d,a,x[i+12],20,-1926607734);a=md5hh(a,b,c,d,x[i+5],4,-378558);d=md5hh(d,a,b,c,x[i+8],11,-2022574463);c=md5hh(c,d,a,b,x[i+11],16,1839030562);b=md5hh(b,c,d,a,x[i+14],23,-35309556);a=md5hh(a,b,c,d,x[i+1],4,-1530992060);d=md5hh(d,a,b,c,x[i+4],11,1272893353);c=md5hh(c,d,a,b,x[i+7],16,-155497632);b=md5hh(b,c,d,a,x[i+10],23,-1094730640);a=md5hh(a,b,c,d,x[i+13],4,681279174);d=md5hh(d,a,b,c,x[i],11,-358537222);c=md5hh(c,d,a,b,x[i+3],16,-722521979);b=md5hh(b,c,d,a,x[i+6],23,76029189);a=md5hh(a,b,c,d,x[i+9],4,-640364487);d=md5hh(d,a,b,c,x[i+12],11,-421815835);c=md5hh(c,d,a,b,x[i+15],16,530742520);b=md5hh(b,c,d,a,x[i+2],23,-995338651);a=md5ii(a,b,c,d,x[i],6,-198630844);d=md5ii(d,a,b,c,x[i+7],10,1126891415);c=md5ii(c,d,a,b,x[i+14],15,-1416354905);b=md5ii(b,c,d,a,x[i+5],21,-57434055);a=md5ii(a,b,c,d,x[i+12],6,1700485571);d=md5ii(d,a,b,c,x[i+3],10,-1894986606);c=md5ii(c,d,a,b,x[i+10],15,-1051523);b=md5ii(b,c,d,a,x[i+1],21,-2054922799);a=md5ii(a,b,c,d,x[i+8],6,1873313359);d=md5ii(d,a,b,c,x[i+15],10,-30611744);c=md5ii(c,d,a,b,x[i+6],15,-1560198380);b=md5ii(b,c,d,a,x[i+13],21,1309151649);a=md5ii(a,b,c,d,x[i+4],6,-145523070);d=md5ii(d,a,b,c,x[i+11],10,-1120210379);c=md5ii(c,d,a,b,x[i+2],15,718787259);b=md5ii(b,c,d,a,x[i+9],21,-343485551);a=safeAdd(a,olda);b=safeAdd(b,oldb);c=safeAdd(c,oldc);d=safeAdd(d,oldd)}return[a,b,c,d]}function binl2rstr(input){var i;var output="";var length32=input.length*32;for(i=0;i<length32;i+=8){output+=String.fromCharCode(input[i>>5]>>>i%32&255)}return output}function rstr2binl(input){var i;var output=[];output[(input.length>>2)-1]=undefined;for(i=0;i<output.length;i+=1){output[i]=0}var length8=input.length*8;for(i=0;i<length8;i+=8){output[i>>5]|=(input.charCodeAt(i/8)&255)<<i%32}return output}function rstrMD5(s){return binl2rstr(binlMD5(rstr2binl(s),s.length*8))}function rstrHMACMD5(key,data){var i;var bkey=rstr2binl(key);var ipad=[];var opad=[];var hash;ipad[15]=opad[15]=undefined;if(bkey.length>16){bkey=binlMD5(bkey,key.length*8)}for(i=0;i<16;i+=1){ipad[i]=bkey[i]^909522486;opad[i]=bkey[i]^1549556828}hash=binlMD5(ipad.concat(rstr2binl(data)),512+data.length*8);return binl2rstr(binlMD5(opad.concat(hash),512+128))}function rstr2hex(input){var hexTab="0123456789abcdef";var output="";var x;var i;for(i=0;i<input.length;i+=1){x=input.charCodeAt(i);output+=hexTab.charAt(x>>>4&15)+hexTab.charAt(x&15)}return output}function str2rstrUTF8(input){return unescape(encodeURIComponent(input))}function rawMD5(s){return rstrMD5(str2rstrUTF8(s))}function hexMD5(s){return rstr2hex(rawMD5(s))}function rawHMACMD5(k,d){return rstrHMACMD5(str2rstrUTF8(k),str2rstrUTF8(d))}function hexHMACMD5(k,d){return rstr2hex(rawHMACMD5(k,d))}function md5(string,key,raw){if(!key){if(!raw){return hexMD5(string)}return rawMD5(string)}if(!raw){return hexHMACMD5(key,string)}return rawHMACMD5(key,string)}if(typeof define==="function"&&define.amd){define(function(){return md5})}else if(typeof module==="object"&&module.exports){module.exports=md5}else{$.md5=md5}})(this);return module.exports}();function composeSignature(creator,created){return trim(creator)+" @ "+trim(created)}function issueJsonToLoose(issue){var out=(copy(issue)||{}).original||{};each(out.meta,function(meta){out[meta.key]=meta.value});each(issue.updates,function(update){each(update.meta,function(meta){out[meta.key]=meta.value})});delete out.meta;return out}function looseJsonToIssueJson(original){var sparse=getLastArgument(arguments,"boolean",false);var updates=[].slice.call(arguments,1);if(sparse){updates.pop()}var out={original:{title:(original.title||"")+"",creator:(original.creator||"")+"",created:(original.created||now())+"",meta:original.meta||[],body:(original.body||"")+""},updates:updates||[]};each(original,function(value,key){if(objectKeys(out.original).indexOf(key)===-1){out.original.meta.push({key:key,value:value+""})}});each(out.updates,function(update){update.modified=update.modified||now()});if(sparse){each(out.original,function(value,key){if(key!=="meta"&&objectKeys(original).indexOf(key)===-1){delete out.original[key]}})}return out}function now(){return dateString(new Date)}function dateString(inputDate){return inputDate.toISOString().replace(/Z$/,"+0000")}function hash(string,size){return mymodule(string).slice(0,size||32)}var helpers=Object.freeze({composeSignature:composeSignature,issueJsonToLoose:issueJsonToLoose,looseJsonToIssueJson:looseJsonToIssueJson,now:now,dateString:dateString,hash:hash});var parser;var issuemdParser=parser=function(){"use strict";function peg$subclass(child,parent){function ctor(){this.constructor=child}ctor.prototype=parent.prototype;child.prototype=new ctor}function peg$SyntaxError(message,expected,found,location){this.message=message;this.expected=expected;this.found=found;this.location=location;this.name="SyntaxError";if(typeof Error.captureStackTrace==="function"){Error.captureStackTrace(this,peg$SyntaxError)}}peg$subclass(peg$SyntaxError,Error);function peg$parse(input){var options=arguments.length>1?arguments[1]:{},parser=this,peg$FAILED={},peg$startRuleFunctions={COLLECTION:peg$parseCOLLECTION},peg$startRuleFunction=peg$parseCOLLECTION,peg$c0=function(title,original,body,updates){original.title=title;original.body=body||null;return{original:original,updates:updates}},peg$c1="##",peg$c2={type:"literal",value:"##",description:'"##"'},peg$c3=function(title){return title},peg$c4=function(created,creator,meta){return{title:null,created:created,creator:creator,meta:meta}},peg$c5=function(modified,modifier,type,meta){return{modified:modified,modifier:modifier,type:type,meta:meta}},peg$c6=function(update,body){update.body=body||null;return update},peg$c7=function(first,content){return first+content.join("")},peg$c8={type:"any",description:"any character"},peg$c9=function(char){return char},peg$c10="---",peg$c11={type:"literal",value:"---",description:'"---"'},peg$c12="created",peg$c13={type:"literal",value:"created",description:'"created"'},peg$c14=function(value){return value},peg$c15="creator",peg$c16={type:"literal",value:"creator",description:'"creator"'},peg$c17="modified",peg$c18={type:"literal",value:"modified",description:'"modified"'},peg$c19="modifier",peg$c20={type:"literal",value:"modifier",description:'"modifier"'},peg$c21="type",peg$c22={type:"literal",value:"type",description:'"type"'},peg$c23=function(label,value){return{key:label,value:value}},peg$c24="+",peg$c25={type:"literal",value:"+",description:'"+"'},peg$c26=/^[a-zA-Z]/,peg$c27={type:"class",value:"[a-zA-Z]",description:"[a-zA-Z]"},peg$c28=/^[a-zA-Z0-9_\-]/,peg$c29={type:"class",value:"[a-zA-Z0-9_-]",description:"[a-zA-Z0-9_-]"},peg$c30=function(start,rest){return start+rest.join("")},peg$c31=":",peg$c32={type:"literal",value:":",description:'":"'},peg$c33=function(value){return value.join("")},peg$c34="\r\n",peg$c35={type:"literal",value:"\r\n",description:'"\\r\\n"'},peg$c36="\r",peg$c37={type:"literal",value:"\r",description:'"\\r"'},peg$c38="\n",peg$c39={type:"literal",value:"\n",description:'"\\n"'},peg$c40="\t",peg$c41={type:"literal",value:"\t",description:'"\\t"'},peg$c42=" ",peg$c43={type:"literal",value:" ",description:'" "'},peg$currPos=0,peg$savedPos=0,peg$posDetailsCache=[{line:1,column:1,seenCR:false}],peg$maxFailPos=0,peg$maxFailExpected=[],peg$silentFails=0,peg$result;if("startRule"in options){if(!(options.startRule in peg$startRuleFunctions)){throw new Error("Can't start parsing from rule \""+options.startRule+'".')}peg$startRuleFunction=peg$startRuleFunctions[options.startRule]}function text(){return input.substring(peg$savedPos,peg$currPos)}function location(){return peg$computeLocation(peg$savedPos,peg$currPos)}function expected(description){throw peg$buildException(null,[{type:"other",description:description}],input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function error(message){throw peg$buildException(message,null,input.substring(peg$savedPos,peg$currPos),peg$computeLocation(peg$savedPos,peg$currPos))}function peg$computePosDetails(pos){var details=peg$posDetailsCache[pos],p,ch;if(details){return details}else{p=pos-1;while(!peg$posDetailsCache[p]){p--}details=peg$posDetailsCache[p];details={line:details.line,column:details.column,seenCR:details.seenCR};while(p<pos){ch=input.charAt(p);if(ch==="\n"){if(!details.seenCR){details.line++}details.column=1;details.seenCR=false}else if(ch==="\r"||ch==="\u2028"||ch==="\u2029"){details.line++;details.column=1;details.seenCR=true}else{details.column++;details.seenCR=false}p++}peg$posDetailsCache[pos]=details;return details}}function peg$computeLocation(startPos,endPos){var startPosDetails=peg$computePosDetails(startPos),endPosDetails=peg$computePosDetails(endPos);return{start:{offset:startPos,line:startPosDetails.line,column:startPosDetails.column},end:{offset:endPos,line:endPosDetails.line,column:endPosDetails.column}}}function peg$fail(expected){if(peg$currPos<peg$maxFailPos){return}if(peg$currPos>peg$maxFailPos){peg$maxFailPos=peg$currPos;peg$maxFailExpected=[]}peg$maxFailExpected.push(expected)}function peg$buildException(message,expected,found,location){function cleanupExpected(expected){var i=1;expected.sort(function(a,b){if(a.description<b.description){return-1}else if(a.description>b.description){return 1}else{return 0}});while(i<expected.length){if(expected[i-1]===expected[i]){expected.splice(i,1)}else{i++}}}function buildMessage(expected,found){function stringEscape(s){function hex(ch){return ch.charCodeAt(0).toString(16).toUpperCase()}return s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(ch){return"\\x0"+hex(ch)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(ch){return"\\x"+hex(ch)}).replace(/[\u0100-\u0FFF]/g,function(ch){return"\\u0"+hex(ch)}).replace(/[\u1000-\uFFFF]/g,function(ch){return"\\u"+hex(ch)})}var expectedDescs=new Array(expected.length),expectedDesc,foundDesc,i;for(i=0;i<expected.length;i++){expectedDescs[i]=expected[i].description}expectedDesc=expected.length>1?expectedDescs.slice(0,-1).join(", ")+" or "+expectedDescs[expected.length-1]:expectedDescs[0];foundDesc=found?'"'+stringEscape(found)+'"':"end of input";return"Expected "+expectedDesc+" but "+foundDesc+" found."}if(expected!==null){cleanupExpected(expected)}return new peg$SyntaxError(message!==null?message:buildMessage(expected,found),expected,found,location)}function peg$parseCOLLECTION(){var s0,s1;s0=[];s1=peg$parseISSUE();while(s1!==peg$FAILED){s0.push(s1);s1=peg$parseISSUE()}return s0}function peg$parseISSUE(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;s1=peg$parseTITLE();if(s1!==peg$FAILED){s2=peg$parseISSUE_META();if(s2!==peg$FAILED){s3=peg$parseDIVIDER();if(s3!==peg$FAILED){s4=peg$parseBODY();if(s4===peg$FAILED){s4=null}if(s4!==peg$FAILED){s5=[];s6=peg$parseUPDATE();while(s6!==peg$FAILED){s5.push(s6);s6=peg$parseUPDATE()}if(s5!==peg$FAILED){peg$savedPos=s0;s1=peg$c0(s1,s2,s4,s5);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseTITLE(){var s0,s1,s2,s3;s0=peg$currPos;if(input.substr(peg$currPos,2)===peg$c1){s1=peg$c1;peg$currPos+=2}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c2)}}if(s1!==peg$FAILED){s2=[];s3=peg$parseSPACE();if(s3!==peg$FAILED){while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseSPACE()}}else{s2=peg$FAILED}if(s2!==peg$FAILED){s3=peg$parseTO_EOL();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c3(s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseISSUE_META(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseMETA_CREATED();if(s1!==peg$FAILED){s2=peg$parseMETA_CREATOR();if(s2!==peg$FAILED){s3=[];s4=peg$parseMETA_ITEM();while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseMETA_ITEM()}if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c4(s1,s2,s3);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseUPDATE_META(){var s0,s1,s2,s3,s4,s5;s0=peg$currPos;s1=peg$parseMETA_MODIFIED();if(s1!==peg$FAILED){s2=peg$parseMETA_MODIFIER();if(s2!==peg$FAILED){s3=peg$parseMETA_TYPE();if(s3!==peg$FAILED){s4=[];s5=peg$parseMETA_ITEM();while(s5!==peg$FAILED){s4.push(s5);s5=peg$parseMETA_ITEM()}if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c5(s1,s2,s3,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseUPDATE(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseUPDATE_DELIMITER();if(s1!==peg$FAILED){s2=peg$parseUPDATE_META();if(s2!==peg$FAILED){s3=peg$parseDIVIDER();if(s3!==peg$FAILED){s4=peg$parseBODY();if(s4===peg$FAILED){s4=null}if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c6(s2,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseBODY(){var s0,s1,s2,s3;s0=peg$currPos;s1=peg$parseNOT_DELIMITER_START();if(s1!==peg$FAILED){s2=[];s3=peg$parseNOT_DELIMITER();while(s3!==peg$FAILED){s2.push(s3);s3=peg$parseNOT_DELIMITER()}if(s2!==peg$FAILED){s3=peg$parseDIVIDER();if(s3!==peg$FAILED){peg$savedPos=s0;s1=peg$c7(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseNOT_DELIMITER(){var s0,s1,s2,s3,s4,s5,s6;s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$currPos;s3=peg$parseDIVIDER();if(s3!==peg$FAILED){s4=peg$parseEOF();if(s4===peg$FAILED){s4=peg$currPos;s5=peg$parseUPDATE_DELIMITER();if(s5!==peg$FAILED){s6=peg$parseMETA_ITEM();if(s6!==peg$FAILED){s5=[s5,s6];s4=s5}else{peg$currPos=s4;s4=peg$FAILED}}else{peg$currPos=s4;s4=peg$FAILED}if(s4===peg$FAILED){s4=peg$currPos;s5=peg$parseTITLE();if(s5!==peg$FAILED){s6=peg$parseMETA_ITEM();if(s6!==peg$FAILED){s5=[s5,s6];s4=s5}else{peg$currPos=s4;s4=peg$FAILED}}else{peg$currPos=s4;s4=peg$FAILED}}}if(s4!==peg$FAILED){s3=[s3,s4];s2=s3}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}peg$silentFails--;if(s2===peg$FAILED){s1=void 0}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){if(input.length>peg$currPos){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c8)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c9(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseNOT_DELIMITER_START(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$parseEOF();if(s2===peg$FAILED){s2=peg$currPos;s3=peg$parseUPDATE_DELIMITER();if(s3!==peg$FAILED){s4=peg$parseMETA_ITEM();if(s4!==peg$FAILED){s3=[s3,s4];s2=s3}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}if(s2===peg$FAILED){s2=peg$currPos;s3=peg$parseTITLE();if(s3!==peg$FAILED){s4=peg$parseMETA_ITEM();if(s4!==peg$FAILED){s3=[s3,s4];s2=s3}else{peg$currPos=s2;s2=peg$FAILED}}else{peg$currPos=s2;s2=peg$FAILED}}}peg$silentFails--;if(s2===peg$FAILED){s1=void 0}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){if(input.length>peg$currPos){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c8)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c9(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseUPDATE_DELIMITER(){var s0;if(input.substr(peg$currPos,3)===peg$c10){s0=peg$c10;peg$currPos+=3}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c11)}}return s0}function peg$parseMETA_CREATED(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseMETA_START();if(s1!==peg$FAILED){if(input.substr(peg$currPos,7)===peg$c12){s2=peg$c12;peg$currPos+=7}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c13)}}if(s2!==peg$FAILED){s3=peg$parseMETA_SEPARATOR();if(s3!==peg$FAILED){s4=peg$parseTO_EOL();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c14(s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseMETA_CREATOR(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseMETA_START();if(s1!==peg$FAILED){if(input.substr(peg$currPos,7)===peg$c15){s2=peg$c15;peg$currPos+=7}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c16)}}if(s2!==peg$FAILED){s3=peg$parseMETA_SEPARATOR();if(s3!==peg$FAILED){s4=peg$parseTO_EOL();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c14(s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseMETA_MODIFIED(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseMETA_START();if(s1!==peg$FAILED){if(input.substr(peg$currPos,8)===peg$c17){s2=peg$c17;peg$currPos+=8}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c18)}}if(s2!==peg$FAILED){s3=peg$parseMETA_SEPARATOR();if(s3!==peg$FAILED){s4=peg$parseTO_EOL();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c14(s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseMETA_MODIFIER(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseMETA_START();if(s1!==peg$FAILED){if(input.substr(peg$currPos,8)===peg$c19){s2=peg$c19;peg$currPos+=8}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c20)}}if(s2!==peg$FAILED){s3=peg$parseMETA_SEPARATOR();if(s3!==peg$FAILED){s4=peg$parseTO_EOL();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c14(s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseMETA_TYPE(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseMETA_START();if(s1!==peg$FAILED){if(input.substr(peg$currPos,4)===peg$c21){s2=peg$c21;peg$currPos+=4}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c22)}}if(s2!==peg$FAILED){s3=peg$parseMETA_SEPARATOR();if(s3!==peg$FAILED){s4=peg$parseTO_EOL();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c14(s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseMETA_ITEM(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseMETA_START();if(s1!==peg$FAILED){s2=peg$parseMETA_LABEL();if(s2!==peg$FAILED){s3=peg$parseMETA_SEPARATOR();if(s3!==peg$FAILED){s4=peg$parseTO_EOL();if(s4!==peg$FAILED){peg$savedPos=s0;s1=peg$c23(s2,s4);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseMETA_START(){var s0,s1,s2,s3,s4;s0=peg$currPos;s1=peg$parseNEWLINE();if(s1!==peg$FAILED){if(input.charCodeAt(peg$currPos)===43){s2=peg$c24;peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c25)}}if(s2!==peg$FAILED){s3=[];s4=peg$parseSPACE();if(s4!==peg$FAILED){while(s4!==peg$FAILED){s3.push(s4);s4=peg$parseSPACE()}}else{s3=peg$FAILED}if(s3!==peg$FAILED){s1=[s1,s2,s3];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseMETA_LABEL(){var s0,s1,s2,s3;s0=peg$currPos;if(peg$c26.test(input.charAt(peg$currPos))){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c27)}}if(s1!==peg$FAILED){s2=[];if(peg$c28.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c29)}}while(s3!==peg$FAILED){s2.push(s3);if(peg$c28.test(input.charAt(peg$currPos))){s3=input.charAt(peg$currPos);peg$currPos++}else{s3=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c29)}}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c30(s1,s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseMETA_SEPARATOR(){var s0,s1,s2;s0=peg$currPos;if(input.charCodeAt(peg$currPos)===58){s1=peg$c31;peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c32)}}if(s1!==peg$FAILED){s2=peg$parseWHITESPACE();if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseTO_EOL(){var s0,s1,s2;s0=peg$currPos;s1=[];s2=peg$parseNOT_NEWLINE();while(s2!==peg$FAILED){s1.push(s2);s2=peg$parseNOT_NEWLINE()}if(s1!==peg$FAILED){peg$savedPos=s0;s1=peg$c33(s1)}s0=s1;return s0}function peg$parseNOT_NEWLINE(){var s0,s1,s2;s0=peg$currPos;s1=peg$currPos;peg$silentFails++;s2=peg$parseNEWLINE();peg$silentFails--;if(s2===peg$FAILED){s1=void 0}else{peg$currPos=s1;s1=peg$FAILED}if(s1!==peg$FAILED){if(input.length>peg$currPos){s2=input.charAt(peg$currPos);peg$currPos++}else{s2=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c8)}}if(s2!==peg$FAILED){peg$savedPos=s0;s1=peg$c9(s2);s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseDIVIDER(){var s0,s1,s2;s0=peg$currPos;s1=peg$parseNEWLINE();if(s1!==peg$FAILED){s2=peg$parseNEWLINE();if(s2!==peg$FAILED){s1=[s1,s2];s0=s1}else{peg$currPos=s0;s0=peg$FAILED}}else{peg$currPos=s0;s0=peg$FAILED}return s0}function peg$parseNEWLINE(){var s0;if(input.substr(peg$currPos,2)===peg$c34){s0=peg$c34;peg$currPos+=2}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c35)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===13){s0=peg$c36;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c37)}}if(s0===peg$FAILED){if(input.charCodeAt(peg$currPos)===10){s0=peg$c38;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c39)}}}}return s0}function peg$parseWHITESPACE(){var s0;if(input.charCodeAt(peg$currPos)===9){s0=peg$c40;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c41)}}if(s0===peg$FAILED){s0=peg$parseSPACE()}return s0}function peg$parseSPACE(){var s0;if(input.charCodeAt(peg$currPos)===32){s0=peg$c42;peg$currPos++}else{s0=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c43)}}return s0}function peg$parseEOF(){var s0,s1;s0=peg$currPos;peg$silentFails++;if(input.length>peg$currPos){s1=input.charAt(peg$currPos);peg$currPos++}else{s1=peg$FAILED;if(peg$silentFails===0){peg$fail(peg$c8)}}peg$silentFails--;if(s1===peg$FAILED){s0=void 0}else{peg$currPos=s0;s0=peg$FAILED}return s0}peg$result=peg$startRuleFunction();if(peg$result!==peg$FAILED&&peg$currPos===input.length){return peg$result}else{if(peg$result!==peg$FAILED&&peg$currPos<input.length){peg$fail({type:"end",description:"end of input"})}throw peg$buildException(null,peg$maxFailExpected,peg$maxFailPos<input.length?input.charAt(peg$maxFailPos):null,peg$maxFailPos<input.length?peg$computeLocation(peg$maxFailPos,peg$maxFailPos+1):peg$computeLocation(peg$maxFailPos,peg$maxFailPos))}}return{SyntaxError:peg$SyntaxError,parse:peg$parse}}();function created(collection,val){if(val){return collection.attr({created:val})}else{return collection.map(function(issue){return issue.attr("created")})}}function id(collection,val){if(val){return collection.attr({id:val})}else{return collection.map(function(issue){return issue.attr("id")})}}function byID(collection,id){return collection.filter(function(issue){return issue.attr("id")===id})}function concat(collection,collectionToConcat){return createCollection(collection.toArray().concat(collectionToConcat.toArray()))}function toArray(collection){return[].slice.call(collection)}function toJSON(collection){return[].slice.call(collection)}function main(ignore,arr){if(arr instanceof issuemd.fn.constructor){return arr}if(type(arr)!=="array"){arr=[].slice.call(arguments,1)}var issues=[];for(var i=0,len=(arr||[]).length;i<len;i++){if(type(arr[i])==="string"){var parsed=issuemdParser.parse(arr[i]);each(parsed,parsedHandler)}else if(arr[i].original){issues.push(createIssue(arr[i]))}else{issues.push(createIssue(looseJsonToIssueJson(arr[i])))}}return createCollection(issues);function parsedHandler(issue){issues.push(createIssue(issue))}}function merge(collection,input){var hashes=collection.hash(true);each(type(input)==="string"?issuemd(input):input,function(issue){var idx;var merged=false;var issueHash=hash(composeSignature(issue.original.creator,issue.original.created));if((idx=hashes.indexOf(issueHash))!==-1){issuemdMerger(collection[idx],issue);merged=true}if(!merged){collection.push(issue)}});return collection}function attr(collection,attrs){if(!attrs){return issueJsonToLoose(collection.toArray()[0])}else if(type(attrs)==="string"){return collection.attr()[attrs]}else{each(collection,function(issue){var issueJsonIn=looseJsonToIssueJson(attrs,true);issueJsonIn.original.meta=issue.original.meta.concat(issueJsonIn.original.meta);issueJsonIn.updates=issue.updates.concat(issueJsonIn.updates);issue.original=extend(issue.original,issueJsonIn.original)});return collection}}function signature(collection){var creator=collection.attr("creator");var created=collection.attr("created");return creator&&created?composeSignature(creator,created):null}function filter(collection,first,second){return second?filterByAttr(collection,first,second):filterByFunction(collection,first);function filterByFunction(collection,filterFunction){var out=createCollection([]);collection.each(function(item,index){if(filterFunction(item,index)){out.merge(item)}});return out}function filterByAttr(collection,key,valueIn){var values=type(valueIn)==="array"?valueIn:[valueIn];return filterByFunction(collection,function(issue){var attrValue=issue.attr(key);var match=false;each(values,function(value){if(!match&&(type(value)==="regexp"&&value.test(attrValue))||attrValue===value){match=true;return match}});return match})}}function hash$1(collection){var all=arguments[arguments.length-1];var arr=[];var howMany=typeof all==="boolean"&&all?collection.length:1;var length=typeof arguments[1]==="number"?arguments[1]:undefined;for(var i=0;i<howMany;i++){arr.push(hash(composeSignature(collection.eq(i).attr("creator"),collection.eq(i).attr("created")),length))}return typeof all==="boolean"&&all?arr:arr[0]}function update(collection,input){if(type(input)!=="array"){input=[].slice.call(arguments,1)}var updates=[];each(input,function(update){var build={meta:[]};each(update,function(value,key){if(key==="type"||key==="modified"||key==="modifier"||key==="body"){build[key]=value}else{build.meta.push({key:key,value:value})}});build.modified=build.modified||now();updates.push(build)});each(collection,function(issue){issue.updates=issue.updates||[];[].push.apply(issue.updates,updates)});return collection}function comments(collection){return reduce(updates(collection),function(memo,update){if(update.type==="comment"){memo.push(update)}return memo},[])}function updates(collection){if(collection[0]){var out=[];each(collection[0].updates,function(update){if(type(update.body)==="string"&&update.body.length){out.push(copy(update));
}});return out}}function clone(collection){return createCollection(copy(collection.toArray()))}function remove(collection,input){input=type(input)==="array"?input:[].slice.call(arguments,1);input.sort().reverse();each(input,function(index){collection.splice(index,1)});return collection}function each$1(collection,func){each(collection,function(item,i){return func(createCollection([item]),i)});return collection}function map$1(collection,func){return map(collection,function(item,i){return func(createCollection([item]),i)})}function eq(collection,index){var newCollection=createCollection([]);newCollection.push(collection[index]);return newCollection}function first(collection,qty){var newCollection=createCollection([]);times(defined(qty)?qty:1,function(i){if(collection[i]){newCollection.push(collection[i])}});return newCollection}function last(collection,qty){var newCollection=createCollection([]);var loops=defined(qty)?qty:1;times(loops,function(i){if(collection[collection.length-loops+i]){newCollection.push(collection[collection.length-loops+i])}});return newCollection}function add(collection,issueJson){collection.push(createIssue(issueJson))}function sortUpdates(collection){collection.each(function(issue){issue[0].updates.sort(function(a,b){return new Date(a.modified)-new Date(b.modified)})});return collection}function Issue(){}function createIssue(issueJson){var instance=extend(new Issue,issueJson);return instance}function createCollection(issues){var instance=new issuemd.fn.constructor;for(var i=0,len=issues.length;i<len;i++){instance.push(issues[i])}return instance}function issuemdMerger(left,right){function objectsEqual(x,y){if(x===y){return true}if(!(x instanceof Object)||!(y instanceof Object)){return false}if(x.constructor!==y.constructor){return false}for(var p in x){if(!x.hasOwnProperty(p)){continue}if(!y.hasOwnProperty(p)){return false}if(x[p]===y[p]){continue}if(typeof x[p]!=="object"){return false}if(!objectsEqual(x[p],y[p])){return false}}for(p in y){if(y.hasOwnProperty(p)&&!x.hasOwnProperty(p)){return false}}return true}var rightUpdates=copy(right.updates);var sorted=right.updates?right.updates.concat(left.updates).sort(function(a,b){return a.modified>b.modified}):left.updates;var merged=[];for(var i=0;i<sorted.length;i++){if(JSON.stringify(sorted[i])!==JSON.stringify(sorted[i-1])){merged.push(sorted[i])}}left.updates=null;right.updates=null;if(!objectsEqual(left,right)){throw Error("issues are not identical - head must not be modified, only updates added")}right.updates=rightUpdates;left.updates=merged;return left}var methods=Object.freeze({concat:concat,toArray:toArray,toJSON:toJSON,main:main,merge:merge,attr:attr,signature:signature,filter:filter,hash:hash$1,update:update,comments:comments,updates:updates,clone:clone,remove:remove,each:each$1,map:map$1,eq:eq,first:first,last:last,add:add,sortUpdates:sortUpdates,created:created,id:id,byID:byID});var htmlTemplate='{{#data}}\n<div class="issue">{{#original}}\n  <div class="original">\n    <div class="head">\n      <h2>{{{title}}}</h2>\n      <ul class="original-attr">\n        <li><b class="key">created<span class="meta-divider">: </b><span class=\'value\' title=\'{{created}}\'>{{#util.date}}{{created}}{{/util.date}}</span></li>\n        <li><b class="key">creator<span class="meta-divider">: </b><span class=\'value\'>{{{creator}}}</span></li>{{#meta}}\n        <li><b class="key">{{key}}<span class="meta-divider">: </b><span class=\'value\'>{{{value}}}</span></li>{{/meta}}\n      </ul>\n    </div>\n    <div class="body">\n{{{body}}}    </div>\n  </div>{{/original}}\n  <div class="updates">{{#updates}}\n    <hr class="update-divider">\n    <div class="update">\n      <ul class="update-attr">\n        <li><b class="key">modified<span class="meta-divider">: </b><span class=\'value\' title=\'{{modified}}\'>{{#util.date}}{{modified}}{{/util.date}}</span></li>\n        <li><b class="key">modifier<span class="meta-divider">: </b><span class=\'value\'>{{{modifier}}}</span></li>\n        <li><b>type:</b> {{type}}</li>{{#meta}}\n        <li><b>{{key}}:</b> {{{value}}}</li>{{/meta}}\n      </ul>\n      <div class="update-body">\n{{{body}}}      </div>\n    </div>{{/updates}}\n  </div>\n</div>\n{{/data}}';var mdTemplate="{{! use triple '{'s for title/value/body to retain special characters }}\n{{#.}}{{#original}}\n## {{{title}}}\n+ created: {{created}}\n+ creator: {{{creator}}}\n{{#meta}}\n+ {{key}}: {{{value}}}\n{{/meta}}\n\n{{#body}}\n{{{body}}}\n\n{{/body}}{{/original}}\n{{#updates}}\n---\n+ modified: {{modified}}\n+ modifier: {{{modifier}}}\n+ type: {{type}}\n{{#meta}}\n+ {{key}}: {{{value}}}\n{{/meta}}\n\n{{#body}}\n{{{body}}}\n\n{{/body}}{{/updates}}\n{{/.}}";var issueSummaryTemplate="{{#data}}\n{{#util.hsep}}+-{{#util.pad}}-{{/util.pad}}-+{{/util.hsep}}\n{{#title}}\n{{#util.hsep}}| {{/util.hsep}}{{#util.htext}}{{#util.body}}{{{.}}}{{/util.body}}{{/util.htext}}{{#util.hsep}} |{{/util.hsep}}\n{{/title}}\n{{#util.hsep}}+-{{#util.padleft}}-{{/util.padleft}}-+-{{#util.padright}}-{{/util.padright}}-+{{/util.hsep}}\n{{#util.bsep}}| {{/util.bsep}}{{#util.bkey}}{{#util.key}}signature{{/util.key }}{{/util.bkey}}{{#util.bsep}} | {{/util.bsep}}{{#util.btext}}{{#util.value}}{{{creator}}} @ {{{created}}}{{/util.value }}{{/util.btext}}{{#util.bsep}} |{{/util.bsep}}\n{{#meta}}\n{{#util.bsep}}| {{/util.bsep}}{{#util.bkey}}{{#util.key}}{{{key}}}{{/util.key}}{{/util.bkey}}{{#util.bsep}} | {{/util.bsep}}{{#util.btext}}{{#util.value}}{{{value}}}{{/util.value}}{{/util.btext}}{{#util.bsep}} |{{/util.bsep}}\n{{/meta}}\n{{#util.bsep}}| {{#util.pad}} {{/util.pad                                                                                                     }} |{{/util.bsep}}\n{{#body}}\n{{#util.bsep}}| {{/util.bsep}}{{#util.btext}}{{#util.body}}{{{.}}}{{/util.body}}{{/util.btext}}{{#util.bsep}} |{{/util.bsep}}\n{{/body}}\n{{#comments}}\n{{#util.bsep}}| {{#util.pad}} {{/util.pad}} |{{/util.bsep}}\n{{#util.bsep}}+-{{#util.padleft}}-{{/util.padleft}}-+-{{#util.padright}}-{{/util.padright}}-+{{/util.bsep}}\n{{#util.bsep}}| {{/util.bsep}}{{#util.bkey}}{{#util.key}}{{type}}{{/util.key }}{{/util.bkey}}{{#util.bsep}} | {{/util.bsep}}{{#util.btext}}{{#util.value}}{{{modifier}}} @ {{{modified}}}{{/util.value}}{{/util.btext}}{{#util.bsep}} |{{/util.bsep}}\n{{#meta}}\n{{#util.bsep}}| {{/util.bsep}}{{#util.bkey}}{{#util.key}}{{{key}}}{{/util.key}}{{/util.bkey}}{{#util.bsep}} | {{/util.bsep}}{{#util.btext}}{{#util.value}}{{{value}}}{{/util.value}}{{/util.btext}}{{#util.bsep}} |{{/util.bsep}}\n{{/meta}}\n{{#util.bsep}}| {{#util.pad}} {{/util.pad}} |{{/util.bsep}}\n{{#body}}\n{{#util.bsep}}| {{/util.bsep}}{{#util.btext}}{{#util.body}}{{{.}}}{{/util.body}}{{/util.btext}}{{#util.bsep}} |{{/util.bsep}}\n{{/body}}\n{{/comments}}\n{{#util.bsep}}+-{{#util.pad}}-{{/util.pad}}-+{{/util.bsep}}\n{{/data}}";var collectionSummaryTemplate="{{#util.hsep}}+-{{#util.pad}}-{{/util.pad}}-+{{/util.hsep}}\n{{#util.hsep}}| {{/util.hsep}}{{#util.htext}}{{#util.body}}ID     Assignee     Status       Title{{/util.body}}{{/util.htext}}{{#util.hsep}} |{{/util.hsep}}\n{{#util.hsep}}+-{{#util.pad}}-{{/util.pad}}-+{{/util.hsep}}\n{{#data}}\n{{#util.bsep}}| {{/util.bsep}}{{#util.btext}}{{#util.curtailed}}{{#util.body}}{{#util.pad6}}{{{id}}}{{/util.pad6}} {{#util.pad12}}{{{assignee}}}{{/util.pad12}} {{#util.pad12}}{{{status}}}{{/util.pad12}} {{{title}}}{{/util.body}}{{/util.curtailed}}{{/util.btext}}{{#util.bsep}} |{{/util.bsep}}\n{{/data}}\n{{#util.bsep}}+-{{#util.pad}}-{{/util.pad}}-+{{/util.bsep}}";var mymodule$1=function(){var exports={},module={exports:exports};(function(){var block={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:noop,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:noop,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:noop,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};block.bullet=/(?:[*+-]|\d+\.)/;block.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/;block.item=replace(block.item,"gm")(/bull/g,block.bullet)();block.list=replace(block.list)(/bull/g,block.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+block.def.source+")")();block.blockquote=replace(block.blockquote)("def",block.def)();block._tag="(?!(?:"+"a|em|strong|small|s|cite|q|dfn|abbr|data|time|code"+"|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo"+"|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b";block.html=replace(block.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,block._tag)();block.paragraph=replace(block.paragraph)("hr",block.hr)("heading",block.heading)("lheading",block.lheading)("blockquote",block.blockquote)("tag","<"+block._tag)("def",block.def)();block.normal=merge({},block);block.gfm=merge({},block.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/});block.gfm.paragraph=replace(block.paragraph)("(?!","(?!"+block.gfm.fences.source.replace("\\1","\\2")+"|"+block.list.source.replace("\\1","\\3")+"|")();block.tables=merge({},block.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/});function Lexer(options){this.tokens=[];this.tokens.links={};this.options=options||marked.defaults;this.rules=block.normal;if(this.options.gfm){if(this.options.tables){this.rules=block.tables}else{this.rules=block.gfm}}}Lexer.rules=block;Lexer.lex=function(src,options){var lexer=new Lexer(options);return lexer.lex(src)};Lexer.prototype.lex=function(src){src=src.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n");return this.token(src,true)};Lexer.prototype.token=function(src,top,bq){var this$1=this;var src=src.replace(/^ +$/gm,""),next,loose,cap,bull,b,item,space,i,l;while(src){if(cap=this$1.rules.newline.exec(src)){src=src.substring(cap[0].length);if(cap[0].length>1){this$1.tokens.push({type:"space"})}}if(cap=this$1.rules.code.exec(src)){src=src.substring(cap[0].length);cap=cap[0].replace(/^ {4}/gm,"");this$1.tokens.push({type:"code",text:!this$1.options.pedantic?cap.replace(/\n+$/,""):cap});continue}if(cap=this$1.rules.fences.exec(src)){src=src.substring(cap[0].length);this$1.tokens.push({type:"code",lang:cap[2],text:cap[3]||""});continue}if(cap=this$1.rules.heading.exec(src)){src=src.substring(cap[0].length);this$1.tokens.push({type:"heading",depth:cap[1].length,text:cap[2]});continue}if(top&&(cap=this$1.rules.nptable.exec(src))){src=src.substring(cap[0].length);item={type:"table",header:cap[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:cap[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:cap[3].replace(/\n$/,"").split("\n")};for(i=0;i<item.align.length;i++){if(/^ *-+: *$/.test(item.align[i])){item.align[i]="right"}else if(/^ *:-+: *$/.test(item.align[i])){item.align[i]="center"}else if(/^ *:-+ *$/.test(item.align[i])){item.align[i]="left"}else{item.align[i]=null}}for(i=0;i<item.cells.length;i++){item.cells[i]=item.cells[i].split(/ *\| */)}this$1.tokens.push(item);continue}if(cap=this$1.rules.lheading.exec(src)){src=src.substring(cap[0].length);this$1.tokens.push({type:"heading",depth:cap[2]==="="?1:2,text:cap[1]});continue}if(cap=this$1.rules.hr.exec(src)){src=src.substring(cap[0].length);this$1.tokens.push({type:"hr"});continue}if(cap=this$1.rules.blockquote.exec(src)){src=src.substring(cap[0].length);this$1.tokens.push({type:"blockquote_start"});cap=cap[0].replace(/^ *> ?/gm,"");this$1.token(cap,top,true);this$1.tokens.push({type:"blockquote_end"});continue}if(cap=this$1.rules.list.exec(src)){src=src.substring(cap[0].length);bull=cap[2];this$1.tokens.push({type:"list_start",ordered:bull.length>1});cap=cap[0].match(this$1.rules.item);next=false;l=cap.length;i=0;for(;i<l;i++){item=cap[i];space=item.length;item=item.replace(/^ *([*+-]|\d+\.) +/,"");if(~item.indexOf("\n ")){space-=item.length;item=!this$1.options.pedantic?item.replace(new RegExp("^ {1,"+space+"}","gm"),""):item.replace(/^ {1,4}/gm,"")}if(this$1.options.smartLists&&i!==l-1){b=block.bullet.exec(cap[i+1])[0];if(bull!==b&&!(bull.length>1&&b.length>1)){src=cap.slice(i+1).join("\n")+src;i=l-1}}loose=next||/\n\n(?!\s*$)/.test(item);if(i!==l-1){next=item.charAt(item.length-1)==="\n";if(!loose){loose=next}}this$1.tokens.push({type:loose?"loose_item_start":"list_item_start"});this$1.token(item,false,bq);this$1.tokens.push({type:"list_item_end"})}this$1.tokens.push({type:"list_end"});continue}if(cap=this$1.rules.html.exec(src)){src=src.substring(cap[0].length);this$1.tokens.push({type:this$1.options.sanitize?"paragraph":"html",pre:!this$1.options.sanitizer&&(cap[1]==="pre"||cap[1]==="script"||cap[1]==="style"),text:cap[0]});continue}if(!bq&&top&&(cap=this$1.rules.def.exec(src))){src=src.substring(cap[0].length);this$1.tokens.links[cap[1].toLowerCase()]={href:cap[2],title:cap[3]};continue}if(top&&(cap=this$1.rules.table.exec(src))){src=src.substring(cap[0].length);item={type:"table",header:cap[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:cap[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:cap[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(i=0;i<item.align.length;i++){if(/^ *-+: *$/.test(item.align[i])){item.align[i]="right"}else if(/^ *:-+: *$/.test(item.align[i])){item.align[i]="center"}else if(/^ *:-+ *$/.test(item.align[i])){item.align[i]="left"}else{item.align[i]=null}}for(i=0;i<item.cells.length;i++){item.cells[i]=item.cells[i].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */)}this$1.tokens.push(item);continue}if(top&&(cap=this$1.rules.paragraph.exec(src))){src=src.substring(cap[0].length);this$1.tokens.push({type:"paragraph",text:cap[1].charAt(cap[1].length-1)==="\n"?cap[1].slice(0,-1):cap[1]});continue}if(cap=this$1.rules.text.exec(src)){src=src.substring(cap[0].length);this$1.tokens.push({type:"text",text:cap[0]});continue}if(src){throw new Error("Infinite loop on byte: "+src.charCodeAt(0))}}return this.tokens};var inline={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:noop,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:noop,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};inline._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/;inline._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/;inline.link=replace(inline.link)("inside",inline._inside)("href",inline._href)();inline.reflink=replace(inline.reflink)("inside",inline._inside)();inline.normal=merge({},inline);inline.pedantic=merge({},inline.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/});inline.gfm=merge({},inline.normal,{escape:replace(inline.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:replace(inline.text)("]|","~]|")("|","|https?://|")()});inline.breaks=merge({},inline.gfm,{br:replace(inline.br)("{2,}","*")(),text:replace(inline.gfm.text)("{2,}","*")()});function InlineLexer(links,options){this.options=options||marked.defaults;this.links=links;this.rules=inline.normal;this.renderer=this.options.renderer||new Renderer;this.renderer.options=this.options;if(!this.links){throw new Error("Tokens array requires a `links` property.")}if(this.options.gfm){if(this.options.breaks){this.rules=inline.breaks}else{this.rules=inline.gfm}}else if(this.options.pedantic){this.rules=inline.pedantic}}InlineLexer.rules=inline;InlineLexer.output=function(src,links,options){var inline=new InlineLexer(links,options);return inline.output(src)};InlineLexer.prototype.output=function(src){var this$1=this;var out="",link,text,href,cap;while(src){if(cap=this$1.rules.escape.exec(src)){src=src.substring(cap[0].length);out+=cap[1];continue}if(cap=this$1.rules.autolink.exec(src)){src=src.substring(cap[0].length);if(cap[2]==="@"){text=cap[1].charAt(6)===":"?this$1.mangle(cap[1].substring(7)):this$1.mangle(cap[1]);href=this$1.mangle("mailto:")+text}else{text=escape(cap[1]);href=text}out+=this$1.renderer.link(href,null,text);continue}if(!this$1.inLink&&(cap=this$1.rules.url.exec(src))){src=src.substring(cap[0].length);text=escape(cap[1]);href=text;out+=this$1.renderer.link(href,null,text);continue}if(cap=this$1.rules.tag.exec(src)){if(!this$1.inLink&&/^<a /i.test(cap[0])){this$1.inLink=true}else if(this$1.inLink&&/^<\/a>/i.test(cap[0])){this$1.inLink=false}src=src.substring(cap[0].length);out+=this$1.options.sanitize?this$1.options.sanitizer?this$1.options.sanitizer(cap[0]):escape(cap[0]):cap[0];continue}if(cap=this$1.rules.link.exec(src)){src=src.substring(cap[0].length);this$1.inLink=true;out+=this$1.outputLink(cap,{href:cap[2],title:cap[3]});this$1.inLink=false;continue}if((cap=this$1.rules.reflink.exec(src))||(cap=this$1.rules.nolink.exec(src))){src=src.substring(cap[0].length);link=(cap[2]||cap[1]).replace(/\s+/g," ");link=this$1.links[link.toLowerCase()];if(!link||!link.href){out+=cap[0].charAt(0);src=cap[0].substring(1)+src;continue}this$1.inLink=true;out+=this$1.outputLink(cap,link);this$1.inLink=false;continue}if(cap=this$1.rules.strong.exec(src)){src=src.substring(cap[0].length);out+=this$1.renderer.strong(this$1.output(cap[2]||cap[1]));continue}if(cap=this$1.rules.em.exec(src)){src=src.substring(cap[0].length);out+=this$1.renderer.em(this$1.output(cap[2]||cap[1]));continue}if(cap=this$1.rules.code.exec(src)){src=src.substring(cap[0].length);out+=this$1.renderer.codespan(escape(cap[2],true));continue}if(cap=this$1.rules.br.exec(src)){src=src.substring(cap[0].length);out+=this$1.renderer.br();continue}if(cap=this$1.rules.del.exec(src)){src=src.substring(cap[0].length);out+=this$1.renderer.del(this$1.output(cap[1]));continue}if(cap=this$1.rules.text.exec(src)){src=src.substring(cap[0].length);out+=this$1.renderer.text(escape(this$1.smartypants(cap[0])));continue}if(src){throw new Error("Infinite loop on byte: "+src.charCodeAt(0))}}return out};InlineLexer.prototype.outputLink=function(cap,link){var href=escape(link.href),title=link.title?escape(link.title):null;return cap[0].charAt(0)!=="!"?this.renderer.link(href,title,this.output(cap[1])):this.renderer.image(href,title,escape(cap[1]))};InlineLexer.prototype.smartypants=function(text){if(!this.options.smartypants){return text}return text.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")};InlineLexer.prototype.mangle=function(text){if(!this.options.mangle){return text}var out="",l=text.length,i=0,ch;for(;i<l;i++){ch=text.charCodeAt(i);if(Math.random()>.5){ch="x"+ch.toString(16)}out+="&#"+ch+";"}return out};function Renderer(options){this.options=options||{}}Renderer.prototype.code=function(code,lang,escaped){if(this.options.highlight){var out=this.options.highlight(code,lang);if(out!=null&&out!==code){escaped=true;code=out}}if(!lang){return"<pre><code>"+(escaped?code:escape(code,true))+"\n</code></pre>"}return'<pre><code class="'+this.options.langPrefix+escape(lang,true)+'">'+(escaped?code:escape(code,true))+"\n</code></pre>\n"};Renderer.prototype.blockquote=function(quote){return"<blockquote>\n"+quote+"</blockquote>\n"};Renderer.prototype.html=function(html){return html};Renderer.prototype.heading=function(text,level,raw){return"<h"+level+' id="'+this.options.headerPrefix+raw.toLowerCase().replace(/[^\w]+/g,"-")+'">'+text+"</h"+level+">\n"};Renderer.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"};Renderer.prototype.list=function(body,ordered){var type=ordered?"ol":"ul";return"<"+type+">\n"+body+"</"+type+">\n"};Renderer.prototype.listitem=function(text){return"<li>"+text+"</li>\n"};Renderer.prototype.paragraph=function(text){return"<p>"+text+"</p>\n"};Renderer.prototype.table=function(header,body){return"<table>\n"+"<thead>\n"+header+"</thead>\n"+"<tbody>\n"+body+"</tbody>\n"+"</table>\n"};Renderer.prototype.tablerow=function(content){return"<tr>\n"+content+"</tr>\n"};Renderer.prototype.tablecell=function(content,flags){var type=flags.header?"th":"td";var tag=flags.align?"<"+type+' style="text-align:'+flags.align+'">':"<"+type+">";return tag+content+"</"+type+">\n"};Renderer.prototype.strong=function(text){return"<strong>"+text+"</strong>"};Renderer.prototype.em=function(text){return"<em>"+text+"</em>"};Renderer.prototype.codespan=function(text){return"<code>"+text+"</code>"};Renderer.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"};Renderer.prototype.del=function(text){return"<del>"+text+"</del>"};Renderer.prototype.link=function(href,title,text){if(this.options.sanitize){try{var prot=decodeURIComponent(unescape(href)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(prot.indexOf("javascript:")===0||prot.indexOf("vbscript:")===0){return""}}var out='<a href="'+href+'"';if(title){out+=' title="'+title+'"'}out+=">"+text+"</a>";return out};Renderer.prototype.image=function(href,title,text){var out='<img src="'+href+'" alt="'+text+'"';if(title){out+=' title="'+title+'"'}out+=this.options.xhtml?"/>":">";return out};Renderer.prototype.text=function(text){return text};function Parser(options){this.tokens=[];this.token=null;this.options=options||marked.defaults;this.options.renderer=this.options.renderer||new Renderer;this.renderer=this.options.renderer;this.renderer.options=this.options}Parser.parse=function(src,options,renderer){var parser=new Parser(options,renderer);return parser.parse(src)};Parser.prototype.parse=function(src){var this$1=this;this.inline=new InlineLexer(src.links,this.options,this.renderer);this.tokens=src.reverse();var out="";while(this.next()){out+=this$1.tok()}return out};Parser.prototype.next=function(){return this.token=this.tokens.pop()};Parser.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0};Parser.prototype.parseText=function(){var this$1=this;var body=this.token.text;while(this.peek().type==="text"){body+="\n"+this$1.next().text}return this.inline.output(body)};Parser.prototype.tok=function(){var this$1=this;switch(this.token.type){case"space":{return""}case"hr":{return this.renderer.hr()}case"heading":{return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text)}case"code":{return this.renderer.code(this.token.text,this.token.lang,this.token.escaped)}case"table":{var header="",body="",i,row,cell,flags,j;cell="";for(i=0;i<this.token.header.length;i++){flags={header:true,align:this$1.token.align[i]};cell+=this$1.renderer.tablecell(this$1.inline.output(this$1.token.header[i]),{header:true,align:this$1.token.align[i]})}header+=this.renderer.tablerow(cell);for(i=0;i<this.token.cells.length;i++){row=this$1.token.cells[i];cell="";for(j=0;j<row.length;j++){cell+=this$1.renderer.tablecell(this$1.inline.output(row[j]),{header:false,align:this$1.token.align[j]})}body+=this$1.renderer.tablerow(cell)}return this.renderer.table(header,body)}case"blockquote_start":{var body="";while(this.next().type!=="blockquote_end"){body+=this$1.tok()}return this.renderer.blockquote(body)}case"list_start":{var body="",ordered=this.token.ordered;while(this.next().type!=="list_end"){body+=this$1.tok()}return this.renderer.list(body,ordered)}case"list_item_start":{var body="";while(this.next().type!=="list_item_end"){body+=this$1.token.type==="text"?this$1.parseText():this$1.tok()}return this.renderer.listitem(body)}case"loose_item_start":{var body="";while(this.next().type!=="list_item_end"){body+=this$1.tok()}return this.renderer.listitem(body)}case"html":{var html=!this.token.pre&&!this.options.pedantic?this.inline.output(this.token.text):this.token.text;return this.renderer.html(html)}case"paragraph":{return this.renderer.paragraph(this.inline.output(this.token.text))}case"text":{return this.renderer.paragraph(this.parseText())}}};function escape(html,encode){return html.replace(!encode?/&(?!#?\w+;)/g:/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function unescape(html){return html.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(_,n){n=n.toLowerCase();if(n==="colon"){return":"}if(n.charAt(0)==="#"){return n.charAt(1)==="x"?String.fromCharCode(parseInt(n.substring(2),16)):String.fromCharCode(+n.substring(1))}return""})}function replace(regex,opt){regex=regex.source;opt=opt||"";return function self(name,val){if(!name){return new RegExp(regex,opt)}val=val.source||val;val=val.replace(/(^|[^\[])\^/g,"$1");regex=regex.replace(name,val);return self}}function noop(){}noop.exec=noop;function merge(obj){var arguments$1=arguments;var i=1,target,key;for(;i<arguments.length;i++){target=arguments$1[i];for(key in target){if(Object.prototype.hasOwnProperty.call(target,key)){obj[key]=target[key]}}}return obj}function marked(src,opt,callback){if(callback||typeof opt==="function"){if(!callback){callback=opt;opt=null}opt=merge({},marked.defaults,opt||{});var highlight=opt.highlight,tokens,pending,i=0;try{tokens=Lexer.lex(src,opt)}catch(e){return callback(e)}pending=tokens.length;var done=function(err){if(err){opt.highlight=highlight;return callback(err)}var out;try{out=Parser.parse(tokens,opt)}catch(e){err=e}opt.highlight=highlight;return err?callback(err):callback(null,out)};if(!highlight||highlight.length<3){return done()}delete opt.highlight;if(!pending){return done()}for(;i<tokens.length;i++){(function(token){if(token.type!=="code"){return--pending||done()}return highlight(token.text,token.lang,function(err,code){if(err){return done(err)}if(code==null||code===token.text){return--pending||done()}token.text=code;token.escaped=true;--pending||done()})})(tokens[i])}return}try{if(opt){opt=merge({},marked.defaults,opt)}return Parser.parse(Lexer.lex(src,opt),opt)}catch(e){e.message+="\nPlease report this to https://github.com/chjj/marked.";if((opt||marked.defaults).silent){return"<p>An error occured:</p><pre>"+escape(e.message+"",true)+"</pre>"}throw e}}marked.options=marked.setOptions=function(opt){merge(marked.defaults,opt);return marked};marked.defaults={gfm:true,tables:true,breaks:false,pedantic:false,sanitize:false,sanitizer:null,mangle:true,smartLists:false,silent:false,highlight:null,langPrefix:"lang-",smartypants:false,headerPrefix:"",renderer:new Renderer,xhtml:false};marked.Parser=Parser;marked.parser=Parser.parse;marked.Renderer=Renderer;marked.Lexer=Lexer;marked.lexer=Lexer.lex;marked.InlineLexer=InlineLexer;marked.inlineLexer=InlineLexer.output;marked.parse=marked;if(typeof module!=="undefined"&&typeof exports==="object"){module.exports=marked}else if(typeof define==="function"&&define.amd){define(function(){return marked})}else{this.marked=marked}}).call(function(){return this||(typeof window!=="undefined"?window:global)}());return module.exports}();var mymodule$2=function(){var exports={},module={exports:exports};(function defineMustache(global,factory){if(typeof exports==="object"&&exports&&typeof exports.nodeName!=="string"){factory(exports)}else if(typeof define==="function"&&define.amd){define(["exports"],factory)}else{global.Mustache={};factory(global.Mustache)}})(this,function mustacheFactory(mustache){var objectToString=Object.prototype.toString;var isArray=Array.isArray||function isArrayPolyfill(object){return objectToString.call(object)==="[object Array]"};function isFunction(object){return typeof object==="function"}function typeStr(obj){return isArray(obj)?"array":typeof obj}function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(obj,propName){return obj!=null&&typeof obj==="object"&&propName in obj}var regExpTest=RegExp.prototype.test;function testRegExp(re,string){return regExpTest.call(re,string)}var nonSpaceRe=/\S/;function isWhitespace(string){return!testRegExp(nonSpaceRe,string)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(string){return String(string).replace(/[&<>"'`=\/]/g,function fromEntityMap(s){return entityMap[s]})}var whiteRe=/\s*/;var spaceRe=/\s+/;var equalsRe=/\s*=/;var curlyRe=/\s*\}/;var tagRe=/#|\^|\/|>|\{|&|=|!/;function parseTemplate(template,tags){if(!template){return[]}var sections=[];var tokens=[];var spaces=[];var hasTag=false;var nonSpace=false;function stripSpace(){if(hasTag&&!nonSpace){while(spaces.length){delete tokens[spaces.pop()]}}else{spaces=[]}hasTag=false;nonSpace=false}var openingTagRe,closingTagRe,closingCurlyRe;function compileTags(tagsToCompile){if(typeof tagsToCompile==="string"){tagsToCompile=tagsToCompile.split(spaceRe,2)}if(!isArray(tagsToCompile)||tagsToCompile.length!==2){throw new Error("Invalid tags: "+tagsToCompile)}openingTagRe=new RegExp(escapeRegExp(tagsToCompile[0])+"\\s*");closingTagRe=new RegExp("\\s*"+escapeRegExp(tagsToCompile[1]));closingCurlyRe=new RegExp("\\s*"+escapeRegExp("}"+tagsToCompile[1]))}compileTags(tags||mustache.tags);var scanner=new Scanner(template);var start,type,value,chr,token,openSection;while(!scanner.eos()){start=scanner.pos;value=scanner.scanUntil(openingTagRe);if(value){for(var i=0,valueLength=value.length;i<valueLength;++i){chr=value.charAt(i);if(isWhitespace(chr)){spaces.push(tokens.length)}else{nonSpace=true}tokens.push(["text",chr,start,start+1]);start+=1;if(chr==="\n"){stripSpace()}}}if(!scanner.scan(openingTagRe)){break}hasTag=true;type=scanner.scan(tagRe)||"name";scanner.scan(whiteRe);if(type==="="){value=scanner.scanUntil(equalsRe);scanner.scan(equalsRe);scanner.scanUntil(closingTagRe)}else if(type==="{"){value=scanner.scanUntil(closingCurlyRe);scanner.scan(curlyRe);scanner.scanUntil(closingTagRe);type="&"}else{value=scanner.scanUntil(closingTagRe)}if(!scanner.scan(closingTagRe)){throw new Error("Unclosed tag at "+scanner.pos)}token=[type,value,start,scanner.pos];tokens.push(token);if(type==="#"||type==="^"){sections.push(token)}else if(type==="/"){openSection=sections.pop();if(!openSection){throw new Error('Unopened section "'+value+'" at '+start)}if(openSection[1]!==value){throw new Error('Unclosed section "'+openSection[1]+'" at '+start)}}else if(type==="name"||type==="{"||type==="&"){nonSpace=true}else if(type==="="){compileTags(value)}}openSection=sections.pop();if(openSection){throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos)}return nestTokens(squashTokens(tokens))}function squashTokens(tokens){var squashedTokens=[];var token,lastToken;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];if(token){if(token[0]==="text"&&lastToken&&lastToken[0]==="text"){lastToken[1]+=token[1];lastToken[3]=token[3]}else{squashedTokens.push(token);lastToken=token}}}return squashedTokens}function nestTokens(tokens){var nestedTokens=[];var collector=nestedTokens;var sections=[];var token,section;for(var i=0,numTokens=tokens.length;i<numTokens;++i){token=tokens[i];switch(token[0]){case"#":case"^":collector.push(token);sections.push(token);collector=token[4]=[];break;case"/":section=sections.pop();section[5]=token[2];collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)}}return nestedTokens}function Scanner(string){this.string=string;this.tail=string;this.pos=0}Scanner.prototype.eos=function eos(){return this.tail===""};Scanner.prototype.scan=function scan(re){var match=this.tail.match(re);if(!match||match.index!==0){return""}var string=match[0];this.tail=this.tail.substring(string.length);this.pos+=string.length;
return string};Scanner.prototype.scanUntil=function scanUntil(re){var index=this.tail.search(re),match;switch(index){case-1:match=this.tail;this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,index);this.tail=this.tail.substring(index)}this.pos+=match.length;return match};function Context(view,parentContext){this.view=view;this.cache={".":this.view};this.parent=parentContext}Context.prototype.push=function push(view){return new Context(view,this)};Context.prototype.lookup=function lookup(name){var cache=this.cache;var value;if(cache.hasOwnProperty(name)){value=cache[name]}else{var context=this,names,index,lookupHit=false;while(context){if(name.indexOf(".")>0){value=context.view;names=name.split(".");index=0;while(value!=null&&index<names.length){if(index===names.length-1){lookupHit=hasProperty(value,names[index])}value=value[names[index++]]}}else{value=context.view[name];lookupHit=hasProperty(context.view,name)}if(lookupHit){break}context=context.parent}cache[name]=value}if(isFunction(value)){value=value.call(this.view)}return value};function Writer(){this.cache={}}Writer.prototype.clearCache=function clearCache(){this.cache={}};Writer.prototype.parse=function parse(template,tags){var cache=this.cache;var tokens=cache[template];if(tokens==null){tokens=cache[template]=parseTemplate(template,tags)}return tokens};Writer.prototype.render=function render(template,view,partials){var tokens=this.parse(template);var context=view instanceof Context?view:new Context(view);return this.renderTokens(tokens,context,partials,template)};Writer.prototype.renderTokens=function renderTokens(tokens,context,partials,originalTemplate){var this$1=this;var buffer="";var token,symbol,value;for(var i=0,numTokens=tokens.length;i<numTokens;++i){value=undefined;token=tokens[i];symbol=token[0];if(symbol==="#"){value=this$1.renderSection(token,context,partials,originalTemplate)}else if(symbol==="^"){value=this$1.renderInverted(token,context,partials,originalTemplate)}else if(symbol===">"){value=this$1.renderPartial(token,context,partials,originalTemplate)}else if(symbol==="&"){value=this$1.unescapedValue(token,context)}else if(symbol==="name"){value=this$1.escapedValue(token,context)}else if(symbol==="text"){value=this$1.rawValue(token)}if(value!==undefined){buffer+=value}}return buffer};Writer.prototype.renderSection=function renderSection(token,context,partials,originalTemplate){var this$1=this;var self=this;var buffer="";var value=context.lookup(token[1]);function subRender(template){return self.render(template,context,partials)}if(!value){return}if(isArray(value)){for(var j=0,valueLength=value.length;j<valueLength;++j){buffer+=this$1.renderTokens(token[4],context.push(value[j]),partials,originalTemplate)}}else if(typeof value==="object"||typeof value==="string"||typeof value==="number"){buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate)}else if(isFunction(value)){if(typeof originalTemplate!=="string"){throw new Error("Cannot use higher-order sections without the original template")}value=value.call(context.view,originalTemplate.slice(token[3],token[5]),subRender);if(value!=null){buffer+=value}}else{buffer+=this.renderTokens(token[4],context,partials,originalTemplate)}return buffer};Writer.prototype.renderInverted=function renderInverted(token,context,partials,originalTemplate){var value=context.lookup(token[1]);if(!value||isArray(value)&&value.length===0){return this.renderTokens(token[4],context,partials,originalTemplate)}};Writer.prototype.renderPartial=function renderPartial(token,context,partials){if(!partials){return}var value=isFunction(partials)?partials(token[1]):partials[token[1]];if(value!=null){return this.renderTokens(this.parse(value),context,partials,value)}};Writer.prototype.unescapedValue=function unescapedValue(token,context){var value=context.lookup(token[1]);if(value!=null){return value}};Writer.prototype.escapedValue=function escapedValue(token,context){var value=context.lookup(token[1]);if(value!=null){return mustache.escape(value)}};Writer.prototype.rawValue=function rawValue(token){return token[1]};mustache.name="mustache.js";mustache.version="2.3.0";mustache.tags=["{{","}}"];var defaultWriter=new Writer;mustache.clearCache=function clearCache(){return defaultWriter.clearCache()};mustache.parse=function parse(template,tags){return defaultWriter.parse(template,tags)};mustache.render=function render(template,view,partials){if(typeof template!=="string"){throw new TypeError('Invalid template! Template should be a "string" '+'but "'+typeStr(template)+'" was given as the first '+"argument for mustache#render(template, view, partials)")}return defaultWriter.render(template,view,partials)};mustache.to_html=function to_html(template,view,partials,send){var result=mustache.render(template,view,partials);if(isFunction(send)){send(result)}else{return result}};mustache.escape=escapeHtml;mustache.Scanner=Scanner;mustache.Context=Context;mustache.Writer=Writer;return mustache});return module.exports}();var issuemdFormatter={md:json2md,html:json2html,string:json2string,summary:json2summaryTable};function json2summaryTable(issueJSObject,cols,templateOverride,colorisationFunctions){cols=cols||80;var data=[];each(main(null,issueJSObject),function(issue){var attr$$1=attr(main(null,issue));data.push({title:attr$$1.title,creator:attr$$1.creator,id:attr$$1.id,assignee:attr$$1.assignee,status:attr$$1.status})});var template=templateOverride||collectionSummaryTemplate;return renderMustache(template,{util:getFormatterUtils(0,cols,colorisationFunctions),data:data})}function json2string(issueJSObject,cols,templateOverride,colorisationFunctions){cols=cols||80;var splitLines=function(input){var output=[];var lines=wordwrap(input,cols-4).replace(/\n\n+/,"\n\n").split("\n");each(lines,function(item){if(item.length<cols-4){output.push(item)}else{output=output.concat(item.match(new RegExp(".{1,"+(cols-4)+"}","g")))}});return output};var template=templateOverride||issueSummaryTemplate;if(issueJSObject){var out=[];var issues=main(null,issueJSObject);each(issues,function(issueJson){var issue=main(null,issueJson);var data={meta:[],comments:[]};var widest="signature".length;each(issue.attr(),function(value,key){if(key==="title"||key==="body"){data[key]=typeof value==="string"?splitLines(value):value}else if(key==="created"||key==="creator"){data[key]=value;if(key.length>widest){widest=key.length}}else{data.meta.push({key:key,value:value});if(key.length>widest){widest=key.length}}});each(issue.updates(),function(value){value.body=splitLines(value.body);data.comments.push(value)});out.push(renderMustache(template,{util:getFormatterUtils(widest,cols,colorisationFunctions),data:data}))});return out.join("\n")}}function getFormatterUtils(widest,cols,colorisationFunctions){cols=cols||80;function renderEcho(val,render){return render(val)}return{date:date,body:body,key:key,value:value,pad:pad,pad6:pad6,pad12:pad12,padleft:padleft,padright:padright,curtailed:curtailed,bkey:function(){return colorisationFunctions&&colorisationFunctions.bkey||renderEcho},bsep:function(){return colorisationFunctions&&colorisationFunctions.bsep||renderEcho},htext:function(){return colorisationFunctions&&colorisationFunctions.htext||renderEcho},hsep:function(){return colorisationFunctions&&colorisationFunctions.hsep||renderEcho},btext:function(){return colorisationFunctions&&colorisationFunctions.btext||renderEcho}};function curtailed(){return function(str,render){var content=render(str);return curtail(content+repeat(" ",cols-4-content.length),cols-4)}}function body(){return function(str,render){var content=render(str);return content+repeat(" ",cols-4-content.length)}}function date(){return function(str,render){return render(str).slice(0,16).replace("T"," ")}}function padleft(){return function(str,render){return repeat(render(str),widest)}}function padright(){return function(str,render){return repeat(render(str),cols-widest-7)}}function pad12(){return function(str,render){return(render(str)+"            ").substr(0,12)}}function key(){return function(str,render){var content=render(str);return content+repeat(" ",widest-content.length)}}function value(){return function(str,render){return render(str)+repeat(" ",cols-7-widest-render(str).length)}}function pad(){return function(str,render){return repeat(render(str),cols-4)}}function pad6(){return function(str,render){return(render(str)+"      ").substr(0,6)}}}function renderMustache(template,data){return mymodule$2.render(template,data)}function json2html(issueJSObject,options){var issues=copy(issueJSObject);each(issues,function(issue){issue.original.body=issue.original.body?mymodule$1(issue.original.body):"";each(issue.updates,function(update$$1){update$$1.body=update$$1.body?mymodule$1(update$$1.body):""})});var template=options.template||htmlTemplate;return renderMustache(template,{util:getFormatterUtils(),data:issues})}function json2md(issueJSObject,options){var template=options.template||mdTemplate;return renderMustache(template,issueJSObject)}function repeat(char,qty){var out="";for(var i=0;i<qty;i++){out+=char}return out}function curtail(input,width){return input.length>width?input.slice(0,width-3)+"...":input}function toString(collection,cols,templateOverride,colorisationFunctions){return issuemdFormatter.string(collection.toArray(),cols,templateOverride,colorisationFunctions)}function summary(collection,cols,templateOverride,colorisationFunctions){return issuemdFormatter.summary(collection.toArray(),cols,templateOverride,colorisationFunctions)}function md(collection,input){var options=getLastArgument(arguments,"object")||{};if(type(input)==="string"){collection.merge(input)}return issuemdFormatter.md(collection.toArray(),options)}function html(collection,options){return issuemdFormatter.html(collection.toArray(),options||{})}var formatter=Object.freeze({toString:toString,summary:summary,md:md,html:html});function issuemd(){return issuemd.fn.main.apply(null,arguments)}issuemd.version="0.0.3";issuemd.fn=Issuemd.prototype={constructor:Issuemd,length:0,push:[].push,sort:[].sort,splice:[].splice,pop:[].pop};function Issuemd(){}each(extend({},methods,formatter),function(method,name){issuemd.fn[name]=function(){return method.apply(null,[this].concat([].slice.call(arguments,0)))};issuemd.fn[name].usage=function(){var m=method.toString().match(/\/\*\s*(#+ *(.|[\r\n])+)\*\//);if(m){return map(m[1].split("\n"),function(line){return trim(line)}).join("\n")}else{return""}}});issuemd.helpers=helpers;issuemd.utils=utils;return issuemd});
